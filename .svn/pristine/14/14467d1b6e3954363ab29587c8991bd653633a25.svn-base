{"version":3,"sources":["webpack:///src/views/login/bind.vue","webpack:///./src/views/login/bind.vue?a8f5","webpack:///./src/views/login/bind.vue"],"names":["bind","computed","extends_default","Object","vuex_esm","data","show","form","seconds","success","colorflag","pswcolorflag","pswcolorflag1","codecolorflag","codeSrc","errormsg","step","userType","userInfo","canSendMig","methods","toPath","path","this","$router","push","changecolor","id","flag","_this2","undefined","mobile","test","$apis","judgeMobile","then","res","list","length","thirdUser","loginType","qqId","wxid","wbId","pwd","checkPwd","toNext","_this","$toast","fail","verifyCodes","params","bindUpdateUserMobile","status","returnCode","updateUserInfo","url","window","location","href","reg","RegExp","replace","indexOf","split","backrouter","name","checkLoginCode","code","bindMobile","console","log","nickname","cover","gender","lcCode","localStorage","getItem","getCode","getMsgCode","interval","setInterval","clearInterval","reGetCode","callback","_this3","getSession","$store","commit","user","mounted","login_bind","render","_vm","_h","$createElement","_c","_self","staticClass","class","kada-mobile-phonefirst","kada-mobile-phoneinputfirst","kada-mobile-phoneerrorfirst","attrs","clearable","placeholder","on","focus","$event","blur","model","value","$$v","$set","expression","_e","_v","kada-mobile-code1","kada-mobile-codeinput1","kada-mobile-codeerror1","click","directives","rawName","_s","type","kada-mobile-phone","kada-mobile-phoneinput","kada-mobile-phoneerror","icon-class","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/14.ea01c982431db0d05b75.js","sourcesContent":["<template>\r\n <div class=\"wx-login-bg\">\r\n    <div class=\"kada-wx-mobile\">\r\n        <!-- <van-cell-group> -->\r\n            <van-field\r\n                :class=\"{'kada-mobile-phonefirst':colorflag==0,'kada-mobile-phoneinputfirst':colorflag==1,'kada-mobile-phoneerrorfirst':colorflag==2}\"\r\n                v-model=\"form.mobile\"\r\n                clearable\r\n                @focus=\"changecolor(1,1)\"\r\n                @blur=\"changecolor(1,0)\"\r\n                placeholder=\"请输入手机号\"\r\n                v-if=\"step === 1\"\r\n            />\r\n            <van-field\r\n                :class=\"{'kada-mobile-code1':codecolorflag==0,'kada-mobile-codeinput1':codecolorflag==1,'kada-mobile-codeerror1':codecolorflag==2}\"\r\n                v-model=\"form.verifyCodes\"\r\n                clearable\r\n                @focus=\"changecolor(3,1)\"\r\n                @blur=\"changecolor(3,0)\"\r\n                placeholder=\"验证码\"\r\n                v-if=\"step === 1\"\r\n            />\r\n            <!-- 获取 -->\r\n            <div v-if=\"!success && step === 1\" @click=\"getCode\" class=\"kada-mobile-codebuttom\">\r\n                <p>获取</p>\r\n            </div>\r\n            <!-- 等待输入验证码 -->\r\n            <div id=\"seconds\" v-show=\"success && seconds>0 && step === 1\" class=\"kada-mobile-codewait\">\r\n                <p>{{seconds}}S</p>\r\n            </div>\r\n            <!-- 重新获取 -->\r\n            <div v-if=\"success && seconds === 0 && step === 1\" @click=\"reGetCode\" class=\"kada-mobile-codebuttom\">\r\n                <p>重新获取</p>\r\n            </div>\r\n            <van-field\r\n                :class=\"{'kada-mobile-phonefirst':pswcolorflag==0,'kada-mobile-phoneinputfirst':pswcolorflag==1,'kada-mobile-phoneerrorfirst':pswcolorflag==2}\"\r\n                v-model=\"form.pwd\"\r\n                clearable\r\n                type=\"password\"\r\n                @focus=\"changecolor(2,1)\"\r\n                @blur=\"changecolor(2,0)\"\r\n                placeholder=\"密码至少8位 支持数字/字母组合\"\r\n                v-if=\"step === 2\"\r\n            />\r\n            <van-field\r\n                :class=\"{'kada-mobile-phone':pswcolorflag1==0,'kada-mobile-phoneinput':pswcolorflag1==1,'kada-mobile-phoneerror':pswcolorflag1==2}\"\r\n                v-model=\"form.checkPwd\"\r\n                clearable\r\n                type=\"password\"\r\n                @focus=\"changecolor(4,1)\"\r\n                @blur=\"changecolor(4,0)\"\r\n                placeholder=\"请再次输入密码\"\r\n                v-if=\"step === 2\"\r\n            />\r\n\r\n        <!-- </van-cell-group> -->\r\n        <!-- 手机图标 -->\r\n        <div v-if=\"step === 1\" class=\"kada-wx-phone\">\r\n            <svg-icon icon-class=\"phone\" />\r\n        </div>\r\n        <div v-if=\"step === 1\" class=\"kada-wx-psw\">\r\n            <svg-icon icon-class=\"vcode\" />\r\n        </div>\r\n        <div v-if=\"step === 2\" class=\"kada-wx-psw3\">\r\n            <svg-icon icon-class=\"password\" />\r\n        </div>\r\n        <div v-if=\"step === 2\" class=\"kada-wx-psw4\">\r\n            <svg-icon icon-class=\"password\" />\r\n        </div>\r\n        <div class=\"kada-mobile-tips\">\r\n            <p>{{errormsg}}</p>\r\n        </div>\r\n        <div v-if=\"step === 1\" @click=\"toNext\" class=\"kada-login-in\">\r\n            <p>下一步</p>\r\n        </div>\r\n        <div v-show=\"step === 2\" @click=\"bindMobile\" class=\"kada-login-in\">\r\n            <p>完成</p>\r\n        </div>\r\n    </div>\r\n </div>\r\n</template>\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapGetters(['thirdUser', 'backrouter'])\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      form: {},\r\n      seconds: 120,\r\n      success: false,\r\n      colorflag: 0,\r\n      pswcolorflag: 0,\r\n      pswcolorflag1: 0,\r\n      codecolorflag: 0,\r\n      codeSrc: '',\r\n      errormsg: '',\r\n      step: 1,\r\n      userType: '',\r\n      userInfo: null,\r\n      canSendMig: false\r\n    }\r\n  },\r\n  methods: {\r\n    toPath(path) {\r\n      this.$router.push({\r\n        path: path\r\n      })\r\n    },\r\n    changecolor(id, flag) {\r\n      if (id === 1) {\r\n        this.colorflag = flag\r\n        this.errormsg = ''\r\n        if (this.form.mobile !== undefined) {\r\n          var reg = /^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\\d{8}$/\r\n          if (!reg.test(this.form.mobile)) {\r\n            this.errormsg = '手机号格式错误！'\r\n            this.colorflag = 2\r\n            return false\r\n          } else {\r\n            this.$apis.judgeMobile({ mobile: this.form.mobile }).then(res => {\r\n              this.canSendMig = true\r\n              if (res.data.data.list.length > 0) {\r\n                this.userInfo = res.data.data.list[0]\r\n                if (this.thirdUser.loginType === 'QQ') {\r\n                  if (this.userInfo.qqId) {\r\n                    this.canSendMig = false\r\n                    this.colorflag = 2\r\n                    this.errormsg = '该手机号已绑定其他QQ'\r\n                    return false\r\n                  }\r\n                } else if (this.thirdUser.loginType === 'WX') {\r\n                  if (this.userInfo.wxid) {\r\n                    this.canSendMig = false\r\n                    this.colorflag = 2\r\n                    this.errormsg = '该手机号已绑定其他微信'\r\n                    return false\r\n                  }\r\n                } else if (this.thirdUser.loginType === 'WB') {\r\n                  if (this.userInfo.wbId) {\r\n                    this.canSendMig = false\r\n                    this.colorflag = 2\r\n                    this.errormsg = '该手机号已绑定其他微博'\r\n                    return false\r\n                  }\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      } else if (id === 2) {\r\n        this.pswcolorflag = flag\r\n        this.errormsg = ''\r\n      } else if (id === 3) {\r\n        this.codecolorflag = flag\r\n        this.errormsg = ''\r\n      } else if (id === 4) {\r\n        this.pswcolorflag1 = flag\r\n        this.errormsg = ''\r\n        if (flag === 0 && this.form.pwd !== this.form.checkPwd) {\r\n          this.errormsg = '两次密码不一致!'\r\n          this.pswcolorflag1 = 2\r\n          return false\r\n        }\r\n      }\r\n    },\r\n    toNext() {\r\n      const _this = this\r\n      if (this.form.mobile === undefined) {\r\n        this.$toast.fail('手机号不能为空！')\r\n        return false\r\n      } else if (this.form.verifyCodes === undefined) {\r\n        this.$toast.fail('验证码不能为空！')\r\n        return false\r\n      }\r\n      if (this.userInfo) {\r\n        const params = {}\r\n        params.id = this.userInfo.id\r\n        params.verifyCodes = this.form.verifyCodes\r\n        params.mobile = this.form.mobile\r\n        if (this.thirdUser.loginType === 'QQ') {\r\n          params.qqId = this.thirdUser.qqId\r\n        } else if (this.thirdUser.loginType === 'WX') {\r\n          params.wxid = this.thirdUser.wxid\r\n        } else if (this.thirdUser.loginType === 'WB') {\r\n          params.wbId = this.thirdUser.wbId\r\n        }\r\n        this.$apis.bindUpdateUserMobile(params).then(res => {\r\n          if (res.data.status.returnCode === 100) {\r\n            _this.$toast.success('绑定成功!')\r\n            _this.updateUserInfo()\r\n\r\n            var url = window.location.href\r\n            var reg = new RegExp('%2F', 'g')\r\n            url = url.replace(reg, '/')\r\n            // url = url.replaceAll('%2F', '/')\r\n            if (url.indexOf('?redirect=') > -1) {\r\n              url = url.split('?redirect=')[1]\r\n              _this.$router.push({\r\n                path: url\r\n              })\r\n            } else {\r\n              if (_this.backrouter !== '') {\r\n                _this.$router.push({\r\n                  path: _this.backrouter\r\n                })\r\n              } else {\r\n                _this.$router.push({\r\n                  name: 'index'\r\n                })\r\n              }\r\n            }\r\n\r\n            // _this.$router.push({ path: '/index' })\r\n            // var origin = window.location.origin\r\n            // window.location.href = origin + '/' + this.projectName + '/'\r\n          }\r\n        })\r\n      } else {\r\n        this.$apis.checkLoginCode({ code: this.form.verifyCodes }).then(res => {\r\n          if (res.data.status.returnCode === 100) {\r\n            _this.step = 2\r\n          }\r\n        })\r\n      }\r\n    },\r\n    bindMobile() {\r\n      const params = {}\r\n      const _this = this\r\n      if (this.form.pwd === undefined) {\r\n        console.log('密码不能为空！')\r\n        this.$toast.fail('密码不能为空！')\r\n        return\r\n      } else if (this.form.checkPwd === undefined) {\r\n        this.$toast.fail('请再次输入密码！')\r\n        return\r\n      }\r\n        var regex = new RegExp('(?=.*[0-9])(?=.*[a-zA-Z]).{8,30}')\r\n      if (!regex.test(this.form.pwd)) {\r\n        this.$toast.fail('密码不合法（必须包含字母、数字且不少于8位）!')\r\n        return\r\n      }\r\n      params.mobile = this.form.mobile\r\n      params.nickname = this.thirdUser.nickname\r\n      params.cover = this.thirdUser.cover\r\n      params.gender = this.thirdUser.gender\r\n      params.pwd = this.form.pwd\r\n      params.verifyCodes = this.form.verifyCodes\r\n      // params.lcCode = this.$store.state.app.setting.lcCode\r\n      params.lcCode = window.localStorage.getItem('lcCode')\r\n      params.wxid = this.thirdUser.wxid\r\n      params.qqId = this.thirdUser.qqId\r\n      params.wbId = this.thirdUser.wbId\r\n      this.$apis.bindMobile(params).then(res => {\r\n        if (res.data.status.returnCode === 100) {\r\n          _this.$toast.success('绑定成功!')\r\n          // var origin = window.location.origin\r\n          // window.location.href = origin + '/' + this.projectName + '/'\r\n          _this.updateUserInfo(() => {\r\n            // _this.$router.push({ path: '/index' })\r\n            var url = window.location.href\r\n            var reg = new RegExp('%2F', 'g')\r\n            url = url.replace(reg, '/')\r\n            if (url.indexOf('?redirect=') > -1) {\r\n              url = url.split('?redirect=')[1]\r\n              _this.$router.push({\r\n                path: url\r\n              })\r\n            } else {\r\n              if (_this.backrouter !== '') {\r\n                _this.$router.push({\r\n                  path: _this.backrouter\r\n                })\r\n              } else {\r\n                _this.$router.push({\r\n                  name: 'index'\r\n                })\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getCode() {\r\n      const _this = this\r\n      if (this.form.mobile && this.canSendMig) {\r\n        this.$apis.getMsgCode({ mobile: this.form.mobile }).then(res => {\r\n          if (res.data.status.returnCode === 100) {\r\n            _this.success = true\r\n            const interval = setInterval(() => {\r\n              _this.seconds--\r\n              if (_this.seconds === 0) {\r\n                clearInterval(interval)\r\n              }\r\n            }, 1000)\r\n          }\r\n        })\r\n      } else if (!this.canSendMig) {\r\n        return false\r\n      } else {\r\n        this.$toast.fail('请填写手机号')\r\n        return false\r\n      }\r\n    },\r\n    reGetCode() {\r\n      const _this = this\r\n      if (this.form.mobile) {\r\n        this.$apis.getMsgCode({ mobile: this.form.mobile }).then(res => {\r\n          if (res.data.status.returnCode === 100) {\r\n            _this.seconds = 120\r\n            const interval = setInterval(() => {\r\n              _this.seconds--\r\n              if (_this.seconds === 0) {\r\n                clearInterval(interval)\r\n              }\r\n            }, 1000)\r\n          }\r\n        })\r\n      } else {\r\n        this.$toast.fail('请填写手机号')\r\n        return false\r\n      }\r\n    },\r\n    updateUserInfo(callback) {\r\n      this.$apis.getSession().then(res => {\r\n        this.$store.commit('SET_USERINFO', res.data.data.list[0].user)\r\n        // this.reload()\r\n      })\r\n      if (callback) {\r\n        callback()\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/bind.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wx-login-bg\"},[_c('div',{staticClass:\"kada-wx-mobile\"},[(_vm.step === 1)?_c('van-field',{class:{'kada-mobile-phonefirst':_vm.colorflag==0,'kada-mobile-phoneinputfirst':_vm.colorflag==1,'kada-mobile-phoneerrorfirst':_vm.colorflag==2},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入手机号\"},on:{\"focus\":function($event){return _vm.changecolor(1,1)},\"blur\":function($event){return _vm.changecolor(1,0)}},model:{value:(_vm.form.mobile),callback:function ($$v) {_vm.$set(_vm.form, \"mobile\", $$v)},expression:\"form.mobile\"}}):_vm._e(),_vm._v(\" \"),(_vm.step === 1)?_c('van-field',{class:{'kada-mobile-code1':_vm.codecolorflag==0,'kada-mobile-codeinput1':_vm.codecolorflag==1,'kada-mobile-codeerror1':_vm.codecolorflag==2},attrs:{\"clearable\":\"\",\"placeholder\":\"验证码\"},on:{\"focus\":function($event){return _vm.changecolor(3,1)},\"blur\":function($event){return _vm.changecolor(3,0)}},model:{value:(_vm.form.verifyCodes),callback:function ($$v) {_vm.$set(_vm.form, \"verifyCodes\", $$v)},expression:\"form.verifyCodes\"}}):_vm._e(),_vm._v(\" \"),(!_vm.success && _vm.step === 1)?_c('div',{staticClass:\"kada-mobile-codebuttom\",on:{\"click\":_vm.getCode}},[_c('p',[_vm._v(\"获取\")])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.success && _vm.seconds>0 && _vm.step === 1),expression:\"success && seconds>0 && step === 1\"}],staticClass:\"kada-mobile-codewait\",attrs:{\"id\":\"seconds\"}},[_c('p',[_vm._v(_vm._s(_vm.seconds)+\"S\")])]),_vm._v(\" \"),(_vm.success && _vm.seconds === 0 && _vm.step === 1)?_c('div',{staticClass:\"kada-mobile-codebuttom\",on:{\"click\":_vm.reGetCode}},[_c('p',[_vm._v(\"重新获取\")])]):_vm._e(),_vm._v(\" \"),(_vm.step === 2)?_c('van-field',{class:{'kada-mobile-phonefirst':_vm.pswcolorflag==0,'kada-mobile-phoneinputfirst':_vm.pswcolorflag==1,'kada-mobile-phoneerrorfirst':_vm.pswcolorflag==2},attrs:{\"clearable\":\"\",\"type\":\"password\",\"placeholder\":\"密码至少8位 支持数字/字母组合\"},on:{\"focus\":function($event){return _vm.changecolor(2,1)},\"blur\":function($event){return _vm.changecolor(2,0)}},model:{value:(_vm.form.pwd),callback:function ($$v) {_vm.$set(_vm.form, \"pwd\", $$v)},expression:\"form.pwd\"}}):_vm._e(),_vm._v(\" \"),(_vm.step === 2)?_c('van-field',{class:{'kada-mobile-phone':_vm.pswcolorflag1==0,'kada-mobile-phoneinput':_vm.pswcolorflag1==1,'kada-mobile-phoneerror':_vm.pswcolorflag1==2},attrs:{\"clearable\":\"\",\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},on:{\"focus\":function($event){return _vm.changecolor(4,1)},\"blur\":function($event){return _vm.changecolor(4,0)}},model:{value:(_vm.form.checkPwd),callback:function ($$v) {_vm.$set(_vm.form, \"checkPwd\", $$v)},expression:\"form.checkPwd\"}}):_vm._e(),_vm._v(\" \"),(_vm.step === 1)?_c('div',{staticClass:\"kada-wx-phone\"},[_c('svg-icon',{attrs:{\"icon-class\":\"phone\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.step === 1)?_c('div',{staticClass:\"kada-wx-psw\"},[_c('svg-icon',{attrs:{\"icon-class\":\"vcode\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.step === 2)?_c('div',{staticClass:\"kada-wx-psw3\"},[_c('svg-icon',{attrs:{\"icon-class\":\"password\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.step === 2)?_c('div',{staticClass:\"kada-wx-psw4\"},[_c('svg-icon',{attrs:{\"icon-class\":\"password\"}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"kada-mobile-tips\"},[_c('p',[_vm._v(_vm._s(_vm.errormsg))])]),_vm._v(\" \"),(_vm.step === 1)?_c('div',{staticClass:\"kada-login-in\",on:{\"click\":_vm.toNext}},[_c('p',[_vm._v(\"下一步\")])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],staticClass:\"kada-login-in\",on:{\"click\":_vm.bindMobile}},[_c('p',[_vm._v(\"完成\")])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f5be709\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/bind.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bind.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bind.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f5be709\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bind.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/bind.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}