webpackJsonp([3],{Cdx3:function(e,o,r){var t=r("sB3e"),a=r("lktj");r("uqUo")("keys",function(){return function(e){return a(t(e))}})},fZjL:function(e,o,r){e.exports={default:r("jFbC"),__esModule:!0}},gwM9:function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=r("fZjL"),a=r.n(t),s=r("Dd8w"),i=r.n(s),c=r("NYxO"),n={computed:i()({},Object(c.b)(["backrouter"])),data:function(){return{show:!1,form:{},colorflag:0,pswcolorflag:0,codecolorflag:0,codeSrc:"",codeerrorflag:!1,usererrorflag:!1,pswerrorflag:!1,errorMessage:{userInput:"",pwdInput:"",Codeinput:""},redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(e){var o=e.query;o&&(this.redirect=o.redirect,this.otherQuery=this.getOtherQuery(o))},immediate:!0}},methods:{toPath:function(e){this.$router.push({path:e})},changecolor:function(e,o){1===e?(this.colorflag=o,this.usererrorflag=!1):2===e?(this.pswcolorflag=o,this.pswerrorflag=!1):3===e&&(this.codecolorflag=o,this.codeerrorflag=!1)},changePic:function(){var e={};e.timeStamp=(new Date).getTime();var o=this;this.$apis.getLoginPic(e).then(function(e){o.codeSrc=e.data.data.list[0]})},handleLogin:function(){var e=this;void 0!==this.form.mobile?void 0!==this.form.pwd?void 0!==this.form.verifyCodes?(this.form.verifyCodes=this.form.verifyCodes.toLocaleUpperCase(),this.$apis.login(this.form).then(function(o){return 307===o.data.status.returnCode?(e.codeerrorflag=!0,e.codecolorflag=2,e.changePic(),!1):303===o.data.status.returnCode?(e.pswerrorflag=!0,e.pswcolorflag=2,e.changePic(),!1):301===o.data.status.returnCode?(e.usererrorflag=!0,e.colorflag=2,e.show=!0,e.changePic(),!1):348===o.data.status.returnCode?(e.$toast.fail("密码错误已达3次，已锁定，请3分钟再次登录"),e.changePic(),!1):void e.$apis.getSession().then(function(o){e.$store.commit("SET_USERINFO",o.data.data.list[0].user),0===o.data.data.list[0].pwdFlg?e.$dialog.confirm({title:"提示信息",message:"您当前为初始密码，请修改密码！",confirmButtonText:"去修改",showCancelButton:!1}).then(function(){e.$router.push({name:"edit_psw"})}).catch(function(){}):""!==e.backrouter?e.$router.push({path:e.backrouter}):e.$router.push({name:"index"})})}).catch(function(e){})):this.$toast.fail("请输入验证码！"):this.$toast.fail("密码不能为空！"):this.$toast.fail("手机号不能为空！")},getOtherQuery:function(e){return a()(e).reduce(function(o,r){return"redirect"!==r&&(o[r]=e[r]),o},{})}},created:function(){this.changePic()}},l={render:function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"wx-login-bg"},[r("div",{staticClass:"kada-wx-mobile"},[r("van-field",{class:{"kada-mobile-phonefirst":0==e.colorflag,"kada-mobile-phoneinputfirst":1==e.colorflag,"kada-mobile-phoneerrorfirst":2==e.colorflag},attrs:{clearable:"",placeholder:"请输入手机号","error-message":e.errorMessage.userInput},on:{focus:function(o){return e.changecolor(1,1)},blur:function(o){return e.changecolor(1,0)}},model:{value:e.form.mobile,callback:function(o){e.$set(e.form,"mobile",o)},expression:"form.mobile"}}),e._v(" "),r("van-field",{class:{"kada-mobile-phone":0==e.pswcolorflag,"kada-mobile-phoneinput":1==e.pswcolorflag,"kada-mobile-phoneerror":2==e.pswcolorflag},attrs:{clearable:"",type:"password",placeholder:"请输入密码","error-message":e.errorMessage.pwdInput},on:{focus:function(o){return e.changecolor(2,1)},blur:function(o){return e.changecolor(2,0)}},model:{value:e.form.pwd,callback:function(o){e.$set(e.form,"pwd",o)},expression:"form.pwd"}}),e._v(" "),r("div",{staticClass:"kada-mobile-codeimg",on:{click:e.changePic}},[r("img",{attrs:{src:e.codeSrc}}),e._v(" "),r("p",[e._v("看不清换一张")])]),e._v(" "),r("van-field",{class:{"kada-mobile-code":0==e.codecolorflag,"kada-mobile-codeinput":1==e.codecolorflag,"kada-mobile-codeerror":2==e.codecolorflag},attrs:{clearable:"",placeholder:"验证码","error-message":e.errorMessage.Codeinput},on:{focus:function(o){return e.changecolor(3,1)},blur:function(o){return e.changecolor(3,0)}},model:{value:e.form.verifyCodes,callback:function(o){e.$set(e.form,"verifyCodes",o)},expression:"form.verifyCodes"}}),e._v(" "),r("div",{staticClass:"kada-wx-phone"},[r("svg-icon",{attrs:{"icon-class":"phone"}})],1),e._v(" "),r("div",{staticClass:"kada-wx-psw"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.codeerrorflag,expression:"codeerrorflag"}],staticClass:"kada-mobile-tips"},[r("p",[e._v("验证码输入错误")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.usererrorflag,expression:"usererrorflag"}],staticClass:"kada-mobile-tips"},[r("p",[e._v("账号不存在")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pswerrorflag,expression:"pswerrorflag"}],staticClass:"kada-mobile-tips"},[r("p",[e._v("密码错误")])]),e._v(" "),r("div",{staticClass:"kada-login-in",on:{click:e.handleLogin}},[r("p",[e._v("登录")])]),e._v(" "),r("div",{staticClass:"kada-login-forgotpsw",on:{click:function(o){return e.toPath("/forgotpsw")}}},[r("p",[e._v("忘记密码？")])]),e._v(" "),r("van-popup",{attrs:{closeable:"","close-icon-position":"top-right"},model:{value:e.show,callback:function(o){e.show=o},expression:"show"}},[r("div",{staticClass:"kada-mobile-dialog"},[r("h3",[e._v("提示信息")]),e._v(" "),r("p",[e._v("该手机号未注册，请点击下方按钮进行注册")]),e._v(" "),r("div",{staticClass:"kada-dialog-buttom",on:{click:function(o){return e.toPath("/register")}}},[r("p",[e._v("去注册")])])])])],1)])},staticRenderFns:[]},d=r("VU/8")(n,l,!1,null,null,null);o.default=d.exports},jFbC:function(e,o,r){r("Cdx3"),e.exports=r("FeBl").Object.keys},uqUo:function(e,o,r){var t=r("kM2E"),a=r("FeBl"),s=r("S82l");e.exports=function(e,o){var r=(a.Object||{})[e]||Object[e],i={};i[e]=o(r),t(t.S+t.F*s(function(){r(1)}),"Object",i)}}});
//# sourceMappingURL=3.eb545ad549339b3b7ec1.js.map